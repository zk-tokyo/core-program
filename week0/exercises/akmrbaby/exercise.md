# week0

## æ¼”ç¿’ 1

### 1. æ¸›ç®—ã¨é™¤ç®—ã®è¨ˆç®—æ–¹æ³•ãƒ»é€†å…ƒã¨ã®é–¢ä¿‚

**æ¸›ç®—**ï¼šåŠ æ³•é€†å…ƒã‚’ç”¨ã„ã¦æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã‚‹ã€‚

```math
a - b \equiv a + (-b) \mod p
```

**é™¤ç®—**ï¼šä¹—æ³•é€†å…ƒã‚’ç”¨ã„ã¦æ¬¡ã®ã‚ˆã†ã«å®šç¾©ã•ã‚Œã‚‹ã€‚

```math
a \div b \equiv a \times b^{-1} \mod p
```

### 2. æ‹¡å¼µãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰æ³•

æ‹¡å¼µãƒ¦ãƒ¼ã‚¯ãƒªãƒƒãƒ‰æ³•ã¨ã¯ã€æ¬¡å¼ã‚’æº€ãŸã™æ•´æ•°ã®çµ„ $x, y$ ã‚’åŠ¹ç‡ã‚ˆãæ±‚ã‚ã‚‹æ‰‹æ³•ã§ã‚ã‚‹ã€‚

```math
gcd(a, b) = xa + yb
```

TypeScript ã§ã®å®Ÿè£…ä¾‹ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹ã€‚

```ts
function extendedGCD(
  a: number,
  b: number
): {
  gcd: number;
  x: number;
  y: number;
} {
  if (b === 0) {
    return { gcd: a, x: 1, y: 0 };
  } else {
    const { gcd, x: x1, y: y1 } = extendedGCD(b, a % b);
    const x = y1;
    const y = x1 - Math.floor(a / b) * y1;
    return { gcd, x, y };
  }
}
```

### 3. è¨ˆç®—å•é¡Œ

```math
3 - 2 = 3 + (-2) \equiv 3 + 3 = 6 \equiv 1 \mod 5
```

### 4. è¨ˆç®—å•é¡Œ

```math
3 \div 2 = 3 \times 2^{-1} \equiv 3 \times 3 = 9 \equiv 4 \mod 5
```

ï¼ˆmod5 ã«ãŠã‘ã‚‹ 2 ã®ä¹—æ³•é€†å…ƒãŒ 3 ã§ã‚ã‚‹ã“ã¨ã‚’åˆ©ç”¨ï¼‰

### 5. è¨ˆç®—å•é¡Œ

```math
(7 \times 5)^{-1} = 35^{-1} \equiv 9^{-1} \equiv 3 \mod 13
```

ï¼ˆmod13 ã«ãŠã‘ã‚‹ 9 ã®ä¹—æ³•é€†å…ƒãŒ 3 ã§ã‚ã‚‹ã“ã¨ã‚’åˆ©ç”¨ï¼‰

## æ¼”ç¿’ 2

### 1. $\mathbb{F}_2$ ã§ 10110101-0110110 ã‚’è¨ˆç®—

ä½“ $\mathbb{F}_2$ ã®æ¸›ç®—ã¯å„ãƒ“ãƒƒãƒˆã® XOR ã§è¡¨ç¾ã§ãã‚‹ãŸã‚ **10000011**

### 2. $\mathbb{F}_{2^8}$ ã§ 10110101-0110110 ã‚’è¨ˆç®—

æ‹¡å¤§ä½“ $\mathbb{F}_{2^n}$ ã®æ¸›ç®—ã¯å„ãƒ“ãƒƒãƒˆã® XOR æ¼”ç®—ã§è¡¨ç¾ã§ãã‚‹ãŸã‚ **10000011**

### 3. $\mathbb{F}_{2^3}$ ã«ãŠã‘ã‚‹ $x^3+x+1$ ä»¥å¤–ã®æ—¢ç´„å¤šé …å¼

```math
x^3 + x^2 + 1
```

ï¼ˆ$\mathbb{F}_{2^3}$ ä¸Šã®æ—¢ç´„å¤šé …å¼ã¯ $x^3 + x + 1$ ã¨ $x^3 + x^2 + 1$ ã® 2 ã¤ã®ã¿ï¼‰

## æ¼”ç¿’ 3

### 1. é›¢æ•£å¯¾æ•°å•é¡Œä»¥å¤–ã§å®‰å…¨æ€§ä»®å®šã«ãªã£ã¦ã„ã‚‹æ•°å­¦çš„å•é¡Œ(2 ã¤)

- **ç´ å› æ•°åˆ†è§£å•é¡Œ**ï¼šå¤§ããªåˆæˆæ•°
  $ğ‘=ğ‘ğ‘$ ã®ç´ å› æ•° $p,q$ ã‚’æ±‚ã‚ã‚‹å•é¡Œã€‚ç¾æ™‚ç‚¹ã§åŠ¹ç‡çš„ãªç´ å› æ•°åˆ†è§£ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ãŒå­˜åœ¨ã—ãªã„ã“ã¨ãŒå®‰å…¨æ€§ã®æ ¹æ‹ ã¨ãªã£ã¦ã„ã‚‹ã€‚

- **æ ¼å­å•é¡Œ**ï¼šæ ¼å­å•é¡Œã® 1 ã¤ã§ã‚ã‚‹ SVP (Short Vector Problem) ã¯ã€é«˜æ¬¡å…ƒæ ¼å­ä¸Šã§æœ€ã‚‚çŸ­ã„ãƒ™ã‚¯ãƒˆãƒ«ã‚’è¦‹ã¤ã‘ã‚‹å•é¡Œã§ã‚ã‚‹ã€‚ã“ã®å•é¡Œã¯ NP å›°é›£æ€§ã‚’æœ‰ã™ã‚‹ã“ã¨ã«åŠ ãˆã¦ã€ç¾åœ¨çŸ¥ã‚‰ã‚Œã¦ã„ã‚‹é‡å­ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’ç”¨ã„ã¦ã‚‚å¤šé …å¼æ™‚é–“ã§ã¯è§£ã‘ãªã„ã“ã¨ã‹ã‚‰é‡å­è€æ€§ã‚’æœ‰ã™ã‚‹ã“ã¨ã‚‚å®‰å…¨æ€§ã®æ ¹æ‹ ã¨ãªã£ã¦ã„ã‚‹ã€‚

### 2. é›¢æ•£å¯¾æ•°å•é¡Œã‚’åŠ¹ç‡çš„ã«èª¬ãã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ (1 ã¤)

- **Baby-Step Giant Step æ³•**ï¼šå…¨æ¢ç´¢ã¨æ¯”è¼ƒã—ã¦ã€æ¢ç´¢ç©ºé–“ã‚’ $\sqrt n$ ã«åˆ†å‰²ã™ã‚‹ã“ã¨ã§è¨ˆç®—é‡ã‚’ $O(\sqrt n)$ ã¾ã§å‰Šæ¸›ã—ã¦ã„ã‚‹ã€‚

### 3. $5^x \equiv 8 \mod 23$ ã®é›¢æ•£å¯¾æ•° $x$ ã‚’æ±‚ã‚ã‚‹

ä»¥ä¸‹ã€Baby-Step Giant-Step æ³•ã‚’ç”¨ã„ã¦è§£ãã€‚

ç¾¤ã®ä½æ•°ã¯ $n=22$ã€$m = \lceil\sqrt{22}\rceil = 5$ã€‚

**Baby-Step**ï¼š$j=0,1,\dots,4$ ã«ã¤ã„ã¦ $5^j \bmod 23$ ã‚’åˆ—æŒ™ã€‚

| $j$ |       $5^j \bmod 23$       |
| :-: | :------------------------: |
|  0  |             1              |
|  1  |             5              |
|  2  |    $5^2 = 25 \equiv 2$     |
|  3  |      $2 \cdot 5 = 10$      |
|  4  | $10 \cdot 5 = 50 \equiv 4$ |

**Giant-Step**ï¼š$\alpha^{-m} = 5^{-5} \bmod 23$ ã‚’æ±‚ã‚ã‚‹ã€‚

ã¾ãš $5^5 \bmod 23 = 20$ã€ãã®é€†å…ƒã¯ $20^{-1}\equiv15$ ãªã®ã§

$$
5^{-5}\equiv15\pmod{23}.
$$

æ¬¡ã« $i=0,1,\dots,4$ ã«ã¤ã„ã¦
$\gamma_i = 8\cdot(15)^i \bmod23$ ã‚’è¨ˆç®—ã—ã€Baby-Step ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ç…§åˆã€‚

| $i$ | $\gamma_i = 8 \cdot 15^i \bmod23$ | Baby-Step ãƒ†ãƒ¼ãƒ–ãƒ«ã«ã‚ã‚‹ã‹ï¼Ÿ | å¯¾å¿œã™ã‚‹ $j$ |
| :-: | :-------------------------------: | :--------------------------: | :----------: |
|  0  |          $8 \cdot 1 = 8$          |             ãªã—             |      -       |
|  1  |    $8 \cdot 15 = 120 \equiv 5$    |             ã‚ã‚Š             |    $j=1$     |

ã“ã“ã§è¡çªãŒè¦‹ã¤ã‹ã£ãŸã®ã§ã€

$$
5^j = \gamma_i = 8 \cdot 5^{-5i}
\quad\Longrightarrow\quad
5^{j + 5i} = 8.
$$

å¯¾å¿œã™ã‚‹æŒ‡æ•°ã¯

$$
x = j + m\,i = 1 + 5\cdot1 = 6.
$$

(**æ¤œç®—**ï¼š$5^6 = (5^3)^2 = 10^2 = 100 \equiv 8 \pmod {23}$)

## æ¼”ç¿’ 4

### 1. ECDLP ã‚’åŠ¹ç‡çš„ã«è¨ˆç®—ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

**Baby-Step Giant-Step (BSGS) æ³•**

ï¼ˆé›¢æ•£å¯¾æ•°å•é¡Œã‚’å®šç¾©ã§ãã‚‹ä»»æ„ã®æœ‰é™å·¡å›ç¾¤ã§é©ç”¨å¯èƒ½ãªä¸€èˆ¬çš„ãªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚Šã€æ¥•å††æ›²ç·šé›¢æ•£å¯¾æ•°ã«å¯¾ã—ã¦ã‚‚é©ç”¨å¯èƒ½ã€‚ï¼‰

### 2. ã‚¹ã‚«ãƒ©ãƒ¼å€æ•£ã‚’åŠ¹ç‡çš„ã«è¨ˆç®—ã™ã‚‹ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

**ãƒã‚¤ãƒŠãƒªæ³•**

> $n$ ã‚’ 1 ä»¥ä¸Šã®æ•´æ•°ã¨ã—ã¦ 2 é€²æ•°å±•é–‹ã—ã¾ã™ã€‚
>
> $$
> n = [\,n_{L-1} : n_{L-2} : \dots : n_0\,]
>   = \sum_{i=0}^{L-1} n_i \,2^i,
> $$
>
> ã“ã“ã§ $n_i\in\{0,1\}$ ã‹ã¤ $n_{L-1}=1$ ã¨ã—ã¾ã™ã€‚
>
> $T := P$ ã«å¯¾ã—ã¦ã€
>
> $$
> T := \mathrm{dbl}(T) = 2P
> $$
>
> $$
> T := \mathrm{dbl}(T) = 2^2P
> $$
>
> $$
> T := \mathrm{dbl}(T) = 2^3P
> $$
>
> $$
> ...
> $$
>
> ã¨é †æ¬¡è¨ˆç®—ã—ã¦ $2^{L-1}P$ ã¾ã§æ±‚ã‚ã¾ã™ã€‚
>
> ãã®ã¨ãå‡ºåŠ›å¤‰æ•° $Q$ ã®åˆæœŸå€¤ã‚’ 0 ã¨ã—ã¦ã€$n$ ã®ä¸‹ä½ãƒ“ãƒƒãƒˆã‹ã‚‰ $n_i = 1$ ã¨ãªã‚‹ã¨ãã®
>
> $$
> T = 2^iP
> $$
>
> ã‚’è¶³ã—ã¦ã„ã‘ã°ã€æœ€çµ‚çš„ã« $nP$ ãŒæ±‚ã¾ã‚Šã¾ã™ã€‚

å‚è€ƒï¼šhttps://zenn.dev/herumi/articles/ecc-binary-method

### 3. Circom ã§ä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®æ¥•å††æ›²ç·š

**bn128**

> Currently, it admits six different primes: bn128, bls12377, bls12381, goldilocks, grumpkin, pallas, secq256r1 and vesta. If not indicated, the default prime is bn128.

å‚è€ƒï¼šhttps://docs.circom.io/getting-started/compilation-options/#other-flags-and-options

ï¼ˆ`bn128` ã¯ `alt_bn128` `BN254` ã¨åŒã˜æ¥•å††æ›²ç·šã‚’æŒ‡ã™ã€‚BNï¼ˆBarretoâ€“Naehrigï¼‰æ›²ç·šå‹ã®æ¥•å††æ›²ç·šã§ã‚ã‚Šã€åŸ‹ã‚è¾¼ã¿æ¬¡æ•° $k=12$ ã®ãƒšã‚¢ãƒªãƒ³ã‚°ãƒ•ãƒ¬ãƒ³ãƒ‰ãƒªãƒ¼ãªæ§‹é€ ã‚’ã‚‚ã¤ã€‚Ethereum ä¸Šã§ãƒ—ãƒªã‚³ãƒ³ãƒ‘ã‚¤ãƒ«é–¢æ•°ã¨ã—ã¦å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŸã‚ EVM ã¨ã®äº’æ›æ€§ãŒé«˜ã„ã€‚ï¼‰

### 4. BLS12-381 ä¸Šã® 2 ç‚¹ $P(3, 5)$, $Q(5, 3)$ ã®åŠ ç®—ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ã‚’ä½¿ã£ã¦è¨ˆç®—

æ¥•å††æ›²ç·š BLS12-381 ã®å¼ã¨ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ä»¥ä¸‹ã®é€šã‚Šã§ã‚ã‚‹ã€‚

$$
y^2 = x^3 + 4 \mod p \quad\text{where}\quad
p = 2^{381} - 19
$$

ç‚¹ $P(3, 5)$ ã¨ $Q(5, 3)$ ã¯ã“ã®æ¥•å††æ›²ç·šä¸Šã®ç‚¹ã§ã¯ãªã„ã®ã§ã€åŠ ç®—ã§ããªã„ã€‚
