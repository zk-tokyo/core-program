## 1. STARK においては、多項式に関する低次元テスト(LDT, p.39)が必要ですが、これまでみてきた SNARK では不要でした。なぜ STARK では LDT が必要で、Groth16 と PLONK ではそれぞれ不要なのかを数式をまじえて説明してみましょう。

### STARK において LDT が必要な理由

STARK では、実行トレースから多項式 $P(X)$ を構築し、$H$（$|H|=T$）から拡大領域 $G$（$|G|=\rho T$）へ補間する。

このとき、次数が $d$ ($d\approx T-1$) 以下という制約があれば、$H$ 上の値列に対応する多項式が一意に定まる。しかし、次数制約がない場合、

$$
Q(\alpha)=P(\alpha)\quad \forall \alpha \in H
$$

を満たす $\deg(Q)>d$ の多項式 $Q(X)$ が無数に存在し得る。

したがって、Merkle tree のコミットによる評価値表の一貫性だけでは不十分である。そのため、別途 LDT を行い、与えられた関数が次数 $d$ 以下の単一多項式であることを検証する必要がある。

---

### Groth16 において LDT が不要な理由

Groth16 では QAP に基づく。算術回路 $C(x,w)=y$ を表すとき、各ゲートに対応するセレクター多項式 $l_i(x), r_i(x), o_i(x)$ を定義し、マスター多項式

$$
p(x) = \Big(\sum_i a_i l_i(x)\Big)\Big(\sum_i a_i r_i(x)\Big) - \Big(\sum_i a_i o_i(x)\Big)
$$

を構成する。証明者は消失多項式 $V(x)$ を用いて、

$$
p(x) = V(x) \cdot q(x)
$$

を満たす商多項式 $q(x)$ が存在することを主張する。

ここで、$V(x)$ は既知の次数上限を持つ多項式であり、共通参照文字列(CRS)が $\tau^i$ の形で埋め込まれているので、高次数の多項式を構成できない。

したがって、LDT のような低次数性チェックをする必要はなく、1 回のペアリング検証で十分である。

---

### Plonk において LDT が不要な理由

Plonk では、制約を多項式恒等式として表現し、検証は多項式コミットメントスキーム（KZG）に基づいて行われる。

例えば、各ワイヤに対応する多項式 $l(X), r(X), o(X)$ とセレクター多項式 $q_L,q_R,q_M,q_O,q_C$ を用いると、

$$
q_L(X)l(X)+q_R(X)r(X)+q_M(X)l(X)r(X)+q_O(X)o(X)+q_C(X) = 0
$$

が基本形となる。これを定義域多項式 $Z_H(X)$ を用いて

$$
q_L(X)l(X)+q_R(X)r(X)+q_M(X)l(X)r(X)+q_O(X)o(X)+q_C(X) = q(X)\cdot Z_H(X)
$$

と変形することで、制約が $H$ 上で成り立つことを表現する。

ここで、KZG は CRS = $(g, g^\tau, g^{\tau^2},\dots,g^{\tau^d})$ を前提とし、コミットできるのは次数 $d$ 以下の多項式に限られる。仮に証明者が $\deg(f)>d$ の多項式をコミットしようとすると、CRS に存在しない $g^{\tau^{d+1}}$ が必要になる。よって、証明者は高次数の多項式を偽造できず、低次数性は構造的に保証される。

以上より、Plonk では STARK のように FRI による LDT を別途実行する必要はなく、KZG の点検証で制約と次数上限を同時にチェックできる。

---

## 2. スライドで説明されている構築方法では、STARK にゼロ知識性が付与されていません。STARK を zkSTARK に変換する方法を 1 つ取り上げ、なぜその方法がゼロ知識性を付与するのかを数式ベースで説明してみましょう。

STARK では多項式 $P(X)$ を、その基底定義域 $H$ の消失多項式

$$
Z_H(X)=\prod_{x\in H}(X-x)\quad(\text{例： }|H|=T\Rightarrow Z_H(X)=X^T-1)
$$

とランダム低次数多項式 $R(X)$ を用いて

$$
P^\star(X)=P(X)+Z_H(X)\cdot R(X)
$$

のようにコミットする。これにより、下記の性質が得られる。

1. 正当性の保持（制約は壊れない）

   任意の $x\in H$ で $Z_H(x)=0$ より

   $$
   P^\star(x)=P(x)
   $$

   したがって、 AIR の境界・遷移制約（$H$ 上の等式）は元のまま成立する。

2. ゼロ知識性

   検証で開示される点は高確率で $G\setminus H$ となる。このとき、任意の $x\in G\setminus H$ で

   $$
   P^\star(x)=P(x)+Z_H(x)\,R(x),\quad Z_H(x)\neq 0
   $$

   乱数 $R$ を独立一様に選べば $P^\star(x)$ は一様化され、$P(x)$ から独立となる。

3. 次数上限の維持

   $$
   \deg P^\star\le \max\big\{\deg P,\,\deg Z_H+\deg R\big\}
   $$

   より、 $\deg R$ を LDT が許容する $d$ に収まるような低い次数に設定すれば

   $$
   \deg P^\star\le d
   $$

   のままなので、FRI の LDT がそのまま適用できる。
