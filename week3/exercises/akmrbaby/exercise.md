## 1. SNARK とは … ARgument of Knowledge（p.7）を指しますが、なぜ「証明」であるのに “argument” と表現しているのでしょうか？”proof” と “argument” の違いを調べて説明してみましょう。

- Proof（証明）

  数学的に厳密な意味での「証明」を指します。完全性と健全性を満たし、悪意のある相手に対しても無条件に安全である。

- Argument（知識の引数）

  SNARK における「argument」は、健全性の保証が計算量的な仮定（例: 離散対数問題の困難性）に基づいている。よって「証明」であっても暗号学的な前提の上に成り立つため、SNARK は "proof" ではなく "argument" と呼ばれる。

---

## 2. p.21 の KZG において、コミットメントに秘匿性（i.e., ゼロ知識性）を与えるにはどうすれば良いでしょうか？具体的な構築方法を調べて説明してみましょう。

コミットメントにゼロ知識性を与える方法として、コミットメント生成時に乱数多項式 $r(X)$ を加える方法がある。

具体的には、通常のコミットメント

$$
C = \text{Commit}(f(X))
$$

に対して、ランダムな多項式 $r(X)$ を加えてコミットメントを生成する。

$$
C' = \text{Commit}(f(X) + r(X))
$$

これにより、コミットメントにゼロ知識性が付与される。ただし、ここで追加した乱数に依存する項は検証時に消えるため、検証処理に影響を与えない。

---

## 3. f(a, b) = 5 \* (a \* b - a) + 2 \* b を PLONK が適用できる形（i.e., 複数の一変量多項式）に途中経過をわかりやすく明示しながら変換してみましょう。

1. 対象の式

   $$
   f(a, b) = 5 \cdot (a \cdot b - a) + 2b
   $$

2. 算術回路化（+ と × のゲートに分解）

   - $t_1 = a \cdot b$
   - $t_2 = t_1 - a$
   - $t_3 = 5 \cdot t_2$
   - $t_4 = 2 \cdot b$
   - $y = t_3 + t_4$

3. ゲートごとの制約を多項式に変換

   - ゲート 1: $t_1 - a\cdot b = 0$
   - ゲート 2: $t_2 - (t_1 - a) = 0$
   - ゲート 3: $t_3 - 5t_2 = 0$
   - ゲート 4: $t_4 - 2b = 0$
   - ゲート 5: $y - (t_3 + t_4) = 0$

4. ゲートごとの等式（セレクタ形）

   PLONK の 各ゲートは
   $\;q_M L R + q_L L + q_R R + q_O O + q_C = 0\;$ を満たすように各列（L,R,O）へ値を配置し、
   $(q_M,q_L,q_R,q_O,q_C)$ を設定する。

   例：

   | ゲート | 目的      | $L$   | $R$   | $O$   | 制約（ゼロ化したい式） | $(q_M,q_L,q_R,q_O,q_C)$ |
   | -----: | :-------- | :---- | :---- | :---- | :--------------------- | :---------------------- |
   |      1 | 乗算      | $a$   | $b$   | $t_1$ | $t_1-a b=0$            | $(1,0,0,-1,0)$          |
   |      2 | 減算      | $t_1$ | $a$   | $t_2$ | $t_2-(t_1-a)=0$        | $(0,1,-1,-1,0)$         |
   |      3 | 定数倍(5) | $t_2$ | $0$   | $t_3$ | $t_3-5 t_2=0$          | $(0,5,0,-1,0)$          |
   |      4 | 定数倍(2) | $b$   | $0$   | $t_4$ | $t_4-2 b=0$            | $(0,2,0,-1,0)$          |
   |      5 | 加算      | $t_3$ | $t_4$ | $y$   | $y-(t_3+t_4)=0$        | $(0,1,1,-1,0)$          |

5. ベクトル化（評価ドメイン上の列データ）

   評価ドメイン $H=\{1,\omega,\omega^2,\omega^3,\omega^4\}$ における各列の値の並びは次のようになる。

   - ウィットネス列（L,R,O）

     - $L:\; [\,a,\;t_1,\;t_2,\;b,\;t_3\,]$
     - $R:\; [\,b,\;a,\;0,\;0,\;t_4\,]$
     - $O:\; [\,t_1,\;t_2,\;t_3,\;t_4,\;y\,]$

   - セレクタ列

     - $q_M:\;[\,1,\;0,\;0,\;0,\;0\,]$
     - $q_L:\;[\,0,\;1,\;5,\;2,\;1\,]$
     - $q_R:\;[\,0,\;-1,\;0,\;0,\;1\,]$
     - $q_O:\;[\,-1,\;-1,\;-1,\;-1,\;-1\,]$
     - $q_C:\;[\,0,\;0,\;0,\;0,\;0\,]$

6. 多項式化

   ベクトルの要素を多項式の評価値として捉え、多項式補完アルゴリズムを用いて多項式化を行う。PLONK ではラグランジュ補間または逆高速フーリエ変換が用いられる。 その結果、与式は複数の一変量多項式に変換される。

---

## 4. p.52 におけるパブリックインプット・アウトプットの証明をたった 1 つの KZG 評価証明で行うにはどうすれば良いか、調べて説明してみましょう。

KZG のバッチ証明の考え方を用いて、全ての点に対する制約を 1 つの多項式で表す。

まず、公開入出力 $x_1,\dots,x_m$ があり、対応するウィットネス値 $w_1,\dots,w_m$ が正しいことを示したい。

公開入出力が正しい場合に $F(x_i)=0$ となるように、$\tilde{w}(X)$ を各 $x_i \mapsto w_i$ に対応する補間多項式として、 $F(X)$ を次のように定義する。

$$
F(X) := W(X) - \tilde{w}(X)
$$

ここで、全ての公開入出力が正しいことは、$F(X)$ が消失多項式 $Z(X)$ で割り切れることと同値となるので、

$$
F(X) = Z(X)\cdot Q(X)
$$

を満たす $Q(X)$ の存在を示せば良い。

以上より、まとめた制約に対して 1 つの KZG 評価証明を生成すれば、すべての公開入出力の正しさを一括で検証可能になる。

---
